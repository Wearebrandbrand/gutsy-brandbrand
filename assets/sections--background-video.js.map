{"version":3,"file":"sections--background-video.js","sources":["../theming/js/sections/background-video.js"],"sourcesContent":["/**\n *  @class\n *  @function BackgroundVideo\n */\nif (!customElements.get('background-video')) {\n  class BackgroundVideo extends HTMLElement {\n    constructor() {\n      super();\n\n      this.tl = false;\n      this.splittext = false;\n      this.paused = false;\n      this.toggle = this.querySelector('.background-video__controls button');\n    }\n\n    connectedCallback() {\n      let _this = this;\n      if (document.body.classList.contains('animations-true') && typeof gsap !== 'undefined') {\n        this.prepareAnimations();\n      }\n      // Video Support.\n      this.video_container = this.querySelector('.background-video__iframe');\n\n      if (this.video_container.querySelector('iframe')) {\n        this.video_container.querySelector('iframe').onload = function () {\n          _this.videoPlay();\n        };\n      }\n\n      // Controls.\n      if (this.toggle) {\n        this.toggle.addEventListener('click', this.setupControlEvents.bind(this));\n      }\n    }\n\n    disconnectedCallback() {\n      if (document.body.classList.contains('animations-true') && typeof gsap !== 'undefined') {\n        this.tl.kill();\n        this.splittext.revert();\n      }\n    }\n\n    setupControlEvents() {\n      if (this.paused) {\n        this.videoPlay();\n        if (this.toggle) {\n          this.toggle.classList.remove('paused');\n        }\n      } else {\n        this.videoPause();\n        if (this.toggle) {\n          this.toggle.classList.add('paused');\n        }\n      }\n    }\n\n    videoPlay() {\n      setTimeout(() => {\n        if (this.video_container.dataset.provider === 'youtube') {\n          this.video_container.querySelector('iframe').contentWindow.postMessage(JSON.stringify({\n            event: \"command\",\n            func: \"playVideo\",\n            args: \"\"\n          }), \"*\");\n        } else if (this.video_container.dataset.provider === 'vimeo') {\n          this.video_container.querySelector('iframe').contentWindow.postMessage(JSON.stringify({\n            method: \"play\"\n          }), \"*\");\n        } else if (this.video_container.dataset.provider === 'hosted') {\n          this.video_container.querySelector('video').play();\n        }\n\n        this.paused = false;\n      }, 10);\n    }\n\n    videoPause() {\n      setTimeout(() => {\n        if (this.video_container.dataset.provider === 'youtube') {\n          this.video_container.querySelector('iframe').contentWindow.postMessage(JSON.stringify({\n            event: \"command\",\n            func: \"pauseVideo\",\n            args: \"\"\n          }), \"*\");\n        } else if (this.video_container.dataset.provider === 'vimeo') {\n          this.video_container.querySelector('iframe').contentWindow.postMessage(JSON.stringify({\n            method: \"pause\"\n          }), \"*\");\n        } else if (this.video_container.dataset.provider === 'hosted') {\n          this.video_container.querySelector('video').pause();\n        }\n        this.paused = true;\n      }, 10);\n    }\n\n    prepareAnimations() {\n      let section = this,\n        button_offset = 0;\n\n      section.tl = gsap.timeline({\n        scrollTrigger: {\n          trigger: section,\n          start: \"top center\"\n        }\n      });\n\n      document.fonts.ready.then(function () {\n        section.splittext = new SplitText(section.querySelectorAll('h3, p:not(.subheading)'), {\n          type: 'lines',\n          linesClass: 'line-child'\n        });\n        section.mask = new SplitText(section.querySelectorAll('h3, p:not(.subheading)'), {\n          type: 'lines',\n          linesClass: 'line-parent'\n        });\n\n        if (section.querySelector('.subheading')) {\n          section.tl\n          .fromTo(section.querySelector('.subheading'), {\n            opacity: 0\n          }, {\n            duration: 0.75,\n            opacity: 0.6\n          }, 0);\n\n          button_offset += 0.5;\n        }\n        if (section.querySelector('h3')) {\n          let h3_duration = 0.7 + ((section.querySelectorAll('h3 .line-child').length - 1) * 0.05);\n          section.tl\n          .from(section.querySelectorAll('h3 .line-child'), {\n            duration: h3_duration,\n            yPercent: 120,\n            stagger: 0.05,\n            rotation: '3deg'\n          }, 0);\n          button_offset += h3_duration;\n        }\n        if (section.querySelector('.rte p')) {\n          let p_duration = 0.7 + ((section.querySelectorAll('p .line-child').length - 1) * 0.02);\n          section.tl\n          .set(section.querySelectorAll('.rte p'), {\n            visibility: 'visible'\n          }, 0)\n          .from(section.querySelectorAll('.rte p .line-child'), {\n            duration: p_duration,\n            yPercent: 120,\n            stagger: 0.02,\n            rotation: '3deg'\n          }, 0);\n          button_offset += p_duration;\n        }\n        if (section.querySelector('.video-lightbox-modal__button')) {\n          section.tl\n          .fromTo(section.querySelector('.video-lightbox-modal__button'), {\n            autoAlpha: 0\n          }, {\n            duration: 0.5,\n            autoAlpha: 1\n          }, button_offset * 0.4);\n        }\n\n      });\n    }\n  }\n\n  customElements.define('background-video', BackgroundVideo);\n}"],"names":["BackgroundVideo","_this","section","button_offset","h3_duration","p_duration"],"mappings":"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"}