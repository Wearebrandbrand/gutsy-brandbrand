{"version":3,"file":"sections--image-hotspots.js","sources":["../theming/js/sections/image-hotspots.js"],"sourcesContent":["/**\n *  @class\n *  @function ImageHotspots\n */\nif (!customElements.get('image-hotspots')) {\n  class ImageHotspots extends HTMLElement {\n    constructor() {\n      super();\n\n      this.dots = this.querySelectorAll('.image-hotspots--pin');\n      this.buttons = this.querySelectorAll('.image-hotspots--pin-button');\n      this.animations_enabled = document.body.classList.contains('animations-true') && typeof gsap !== 'undefined';\n      this.activeDot = this.buttons.length ? this.buttons[0] : false;\n\n      this.dots.forEach((dot, index) => {\n        this.checkCardPosition(dot);\n        dot.addEventListener('click', this.onClick.bind(this, dot));\n\n      });\n    }\n\n    connectedCallback() {\n      if (this.animations_enabled) {\n        this.prepareAnimations();\n      }\n    }\n\n    onClick(dot) {\n\n      this.dots.forEach((thedot, index) => {\n        if (dot == thedot) {\n          return;\n        }\n        thedot.classList.remove('active');\n      });\n      this.activeDot = dot;\n      this.checkCardPosition(dot);\n      dot.classList.toggle('active');\n      if (!dot.classList.contains('active')) {\n        setTimeout(() => {\n          dot.classList.remove('bottom-dot');\n          dot.style.setProperty('--content-offset', '0px');\n        }, 350);\n      }\n\n    }\n\n    prepareAnimations() {\n      let section = this;\n\n      this.tl = gsap.timeline({\n        scrollTrigger: {\n          trigger: section,\n          start: \"top 50%\"\n        }\n      });\n\n      this.tl\n      .fromTo(this.buttons, {\n        scale: 0\n      }, {\n        duration: 2,\n        stagger: {\n          each: 0.2,\n          onComplete() {\n            this.targets()[0].classList.add('hotspot--pinned');\n          }\n        },\n        scale: 1,\n        ease: 'elastic.out(1.2, 0.5)',\n      });\n    }\n\n    checkCardPosition(dot) {\n      let dotBounds = dot.querySelector('.image-hotspots--pin-bubble').getBoundingClientRect(),\n        imageBounds = this.getBoundingClientRect();\n\n      if (dotBounds.bottom > document.documentElement.clientHeight || dotBounds.bottom > imageBounds.bottom) {\n        dot.classList.add('bottom-dot');\n      }\n      if (dotBounds.right > imageBounds.right) {\n        dot.style.setProperty('--content-offset', `${imageBounds.right - dotBounds.right - 30}px`);\n      } else if (dotBounds.left < imageBounds.left) {\n        dot.style.setProperty('--content-offset', `${imageBounds.left - dotBounds.left + 30}px`);\n      }\n    }\n  }\n\n  customElements.define('image-hotspots', ImageHotspots);\n}"],"names":["ImageHotspots","dot","index","thedot","section","dotBounds","imageBounds"],"mappings":"AAIA,GAAI,CAAC,eAAe,IAAI,gBAAgB,EAAG,CACzC,MAAMA,UAAsB,WAAY,CACtC,aAAc,CACZ,MAAO,EAEP,KAAK,KAAO,KAAK,iBAAiB,sBAAsB,EACxD,KAAK,QAAU,KAAK,iBAAiB,6BAA6B,EAClE,KAAK,mBAAqB,SAAS,KAAK,UAAU,SAAS,iBAAiB,GAAK,OAAO,KAAS,IACjG,KAAK,UAAY,KAAK,QAAQ,OAAS,KAAK,QAAQ,CAAC,EAAI,GAEzD,KAAK,KAAK,QAAQ,CAACC,EAAKC,IAAU,CAChC,KAAK,kBAAkBD,CAAG,EAC1BA,EAAI,iBAAiB,QAAS,KAAK,QAAQ,KAAK,KAAMA,CAAG,CAAC,CAElE,CAAO,CACP,CAEI,mBAAoB,CACd,KAAK,oBACP,KAAK,kBAAmB,CAEhC,CAEI,QAAQA,EAAK,CAEX,KAAK,KAAK,QAAQ,CAACE,EAAQD,IAAU,CAC/BD,GAAOE,GAGXA,EAAO,UAAU,OAAO,QAAQ,CACxC,CAAO,EACD,KAAK,UAAYF,EACjB,KAAK,kBAAkBA,CAAG,EAC1BA,EAAI,UAAU,OAAO,QAAQ,EACxBA,EAAI,UAAU,SAAS,QAAQ,GAClC,WAAW,IAAM,CACfA,EAAI,UAAU,OAAO,YAAY,EACjCA,EAAI,MAAM,YAAY,mBAAoB,KAAK,CAChD,EAAE,GAAG,CAGd,CAEI,mBAAoB,CAClB,IAAIG,EAAU,KAEd,KAAK,GAAK,KAAK,SAAS,CACtB,cAAe,CACb,QAASA,EACT,MAAO,SACjB,CACA,CAAO,EAED,KAAK,GACJ,OAAO,KAAK,QAAS,CACpB,MAAO,CACf,EAAS,CACD,SAAU,EACV,QAAS,CACP,KAAM,GACN,YAAa,CACX,KAAK,QAAO,EAAG,CAAC,EAAE,UAAU,IAAI,iBAAiB,CAC7D,CACS,EACD,MAAO,EACP,KAAM,uBACd,CAAO,CACP,CAEI,kBAAkBH,EAAK,CACrB,IAAII,EAAYJ,EAAI,cAAc,6BAA6B,EAAE,sBAAuB,EACtFK,EAAc,KAAK,sBAAuB,GAExCD,EAAU,OAAS,SAAS,gBAAgB,cAAgBA,EAAU,OAASC,EAAY,SAC7FL,EAAI,UAAU,IAAI,YAAY,EAE5BI,EAAU,MAAQC,EAAY,MAChCL,EAAI,MAAM,YAAY,mBAAoB,GAAGK,EAAY,MAAQD,EAAU,MAAQ,EAAE,IAAI,EAChFA,EAAU,KAAOC,EAAY,MACtCL,EAAI,MAAM,YAAY,mBAAoB,GAAGK,EAAY,KAAOD,EAAU,KAAO,EAAE,IAAI,CAE/F,CACA,CAEE,eAAe,OAAO,iBAAkBL,CAAa,CACvD"}