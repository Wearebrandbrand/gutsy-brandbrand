{"version":3,"file":"components--header.js","sources":["../theming/js/components/header.js"],"sourcesContent":["if (typeof debounce === 'undefined') {\n  function debounce(fn, wait) {\n    let t;\n    return (...args) => {\n      clearTimeout(t);\n      t = setTimeout(() => fn.apply(this, args), wait);\n    };\n  }\n}\n/**\n *  @class\n *  @function ThemeHeader\n */\n\nif (!customElements.get('theme-header')) {\n  class ThemeHeader extends HTMLElement {\n    constructor() {\n      super();\n\n    }\n\n    connectedCallback() {\n      this.header_section = document.querySelector('.header-section');\n      this.menu = this.querySelector('#mobile-menu');\n      this.toggle = this.querySelector('.mobile-toggle-wrapper');\n\n      document.addEventListener('keyup', (e) => {\n        if (e.code) {\n          if (e.code.toUpperCase() === 'ESCAPE') {\n            this.toggle.removeAttribute('open');\n            this.toggle.classList.remove('active');\n          }\n        }\n      });\n      if (this.classList.contains('header-sticky--active')) {\n        document.body.classList.add('header-sticky--active');\n      }\n      this.toggle.querySelector('.mobile-toggle').addEventListener('click', (e) => {\n        if (this.toggle.classList.contains('active')) {\n          e.preventDefault();\n          document.body.classList.remove('overflow-hidden');\n          this.toggle.classList.remove('active');\n          this.closeAnimation(this.toggle);\n        } else {\n          document.body.classList.add('overflow-hidden');\n          setTimeout(() => {\n            this.toggle.classList.add('active');\n          });\n        }\n      });\n\n      // Sticky Header Class\n      window.addEventListener('scroll', this.setStickyClass.bind(this), {\n        passive: true\n      });\n\n      // Mobile Menu offset\n      window.addEventListener('scroll', this.setHeaderOffset.bind(this), {\n        passive: true\n      });\n      window.addEventListener('scroll', this.setHeaderHeight.bind(this), {\n        passive: true\n      });\n\n      window.dispatchEvent(new Event('scroll'));\n\n      if (document.querySelector('.announcement-bar-section')) {\n\n        window.addEventListener('scroll', this.setAnnouncementHeight(), {\n          passive: true\n        });\n        window.dispatchEvent(new Event('resize'));\n      }\n\n      // Mobile Navigation transparent header support.\n      setTimeout(() => {\n\n        this.mobile_nav = document.querySelector('.header-mobile-navigation');\n\n        if (this.mobile_nav && this.classList.contains('transparent--true')) {\n          this.mobile_nav.classList.add('is-fixed');\n        }\n      }, 100);\n      // Buttons.\n      this.menu.querySelectorAll('summary').forEach(summary => summary.addEventListener('click', this.onSummaryClick.bind(this)));\n      this.menu.querySelectorAll('.parent-link-back--button').forEach(button => button.addEventListener('click', this.onCloseButtonClick.bind(this)));\n    }\n\n    setStickyClass() {\n      if (this.classList.contains('header-sticky--active')) {\n        let offset = parseInt(this.getBoundingClientRect().top, 10) + document.documentElement.scrollTop;\n        this.classList.toggle('is-sticky', window.scrollY >= offset && window.scrollY > 0);\n      }\n    }\n\n    setAnnouncementHeight() {\n      const a_bar = document.querySelector('.announcement-bar-section');\n      let h = a_bar.clientHeight;\n      document.documentElement.style.setProperty('--announcement-height', h + 'px');\n    }\n\n    setHeaderOffset() {\n      let h = this.header_section.getBoundingClientRect().top;\n      document.documentElement.style.setProperty('--header-offset', h + 'px');\n    }\n\n    setHeaderHeight() {\n      let h = this.clientHeight;\n      document.documentElement.style.setProperty('--header-height', h + 'px');\n    }\n\n    onSummaryClick(event) {\n      const summaryElement = event.currentTarget;\n      const detailsElement = summaryElement.parentNode;\n      const parentMenuElement = detailsElement.closest('.link-container');\n      const isOpen = detailsElement.hasAttribute('open');\n      if (this.querySelector('.parent-link-back--button')) {\n        this.menu.scrollTop = 0;\n      }\n      setTimeout(() => {\n        detailsElement.classList.add('menu-opening');\n        parentMenuElement && parentMenuElement.classList.add('submenu-open');\n      }, 100);\n    }\n\n    onCloseButtonClick(event) {\n      event.preventDefault();\n      const detailsElement = event.currentTarget.closest('details');\n      this.closeSubmenu(detailsElement);\n    }\n\n    closeSubmenu(detailsElement) {\n      detailsElement.classList.remove('menu-opening');\n      this.closeAnimation(detailsElement);\n    }\n\n    closeAnimation(detailsElement) {\n      let animationStart;\n\n      const handleAnimation = (time) => {\n        if (animationStart === undefined) {\n          animationStart = time;\n        }\n\n        const elapsedTime = time - animationStart;\n\n        if (elapsedTime < 400) {\n          window.requestAnimationFrame(handleAnimation);\n        } else {\n          detailsElement.removeAttribute('open');\n        }\n      };\n\n      window.requestAnimationFrame(handleAnimation);\n    }\n  }\n\n  customElements.define('theme-header', ThemeHeader);\n}\n\n/**\n *  @class\n *  @function FullMenu\n */\nif (!customElements.get('full-menu')) {\n  class FullMenu extends HTMLElement {\n    constructor() {\n      super();\n\n      this.submenus = this.querySelectorAll('.thb-full-menu>.menu-item-has-children:not(.menu-item-has-megamenu)>.sub-menu');\n    }\n\n    connectedCallback() {\n      if (!this.submenus.length) {\n        return;\n      }\n      const _this = this;\n      // resize on initial load\n      document.fonts.ready.then(function () {\n        window.addEventListener('resize', debounce(function () {\n          _this.resizeSubMenus();\n        }, 100));\n      });\n\n    }\n\n    resizeSubMenus() {\n      this.submenus.forEach((submenu) => {\n        let sub_submenus = submenu.querySelectorAll(':scope >.menu-item-has-children>.sub-menu');\n\n        sub_submenus.forEach((sub_submenu) => {\n          let w = sub_submenu.offsetWidth,\n            l = sub_submenu.parentElement.getBoundingClientRect().left + sub_submenu.parentElement.offsetWidth,\n            total = w + l;\n\n          if (total > window.innerWidth) {\n            sub_submenu.parentElement.classList.add('left-submenu');\n          } else if (sub_submenu.parentElement.classList.contains('left-submenu')) {\n            sub_submenu.parentElement.classList.remove('left-submenu');\n          }\n        });\n      });\n    }\n  }\n\n  customElements.define('full-menu', FullMenu);\n}"],"names":["ThemeHeader","summary","button","offset","h","event","detailsElement","parentMenuElement","animationStart","handleAnimation","time","FullMenu","_this","submenu","sub_submenu","w","l"],"mappings":"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"}