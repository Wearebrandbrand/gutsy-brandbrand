{"version":3,"file":"sections--scrolling-content.js","sources":["../theming/js/sections/scrolling-content.js"],"sourcesContent":["/**\n *  @class\n *  @function ScrollingContent\n */\nif (!customElements.get('scrolling-content')) {\n  class ScrollingContent extends HTMLElement {\n    static get observedAttributes() {\n      return ['selected-index'];\n    }\n\n    constructor() {\n      super();\n    }\n\n    connectedCallback() {\n      this.images_container = Array.from(this.querySelectorAll('.scrolling-content--image'));\n      this.first_image = this.querySelector('.scrolling-content--image.active');\n      this.sections = Array.from(this.querySelectorAll('.scrolling-content--content'));\n      this.dots = this.first_image.querySelectorAll('.dot');\n      this.offset = '-50% 0% -50% 0%';\n      this.selectedIndex = this.selectedIndex;\n      this.intersectionOptions = {\n        rootMargin: this.offset,\n        threshold: 0\n      };\n\n      this.sections.forEach((section, i) => {\n        let observer = new IntersectionObserver(\n          this.handleIntersectionCallback.bind(this),\n          this.intersectionOptions\n        );\n        observer.observe(section);\n      });\n\n      if (this.dots.length) {\n        let sections = this.sections;\n        this.dots.forEach((dot, i) => {\n          dot.addEventListener('click', function (e) {\n            let h_height = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--header-height'), 10);\n            let scrollTop = sections[i].getBoundingClientRect().top + window.scrollY - h_height;\n            window.scrollTo({\n              top: scrollTop,\n              left: 0,\n              behavior: \"smooth\"\n            });\n          });\n        });\n      }\n\n    }\n\n    handleIntersectionCallback(entries) {\n      let largest = 0;\n      entries.forEach((entry, i) => {\n        let index = this.sections.indexOf(entry.target);\n        if (index !== this.selectedIndex) {\n          this.selectedIndex = index;\n        }\n      });\n\n    }\n\n    get selectedIndex() {\n      return parseInt(this.getAttribute('selected-index')) || 0;\n    }\n\n    set selectedIndex(index) {\n      this.setAttribute('selected-index', index);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n      if (name === \"selected-index\" && oldValue !== null && oldValue !== newValue) {\n        if (this.dots.length) {\n          [].forEach.call(this.dots, function (el) {\n            el.classList.remove('is-selected');\n          });\n          this.dots[newValue].classList.add('is-selected');\n        }\n      }\n    }\n  }\n\n  customElements.define('scrolling-content', ScrollingContent);\n}"],"names":["ScrollingContent","section","i","sections","dot","e","h_height","scrollTop","entries","entry","index","name","oldValue","newValue","el"],"mappings":"AAIA,GAAI,CAAC,eAAe,IAAI,mBAAmB,EAAG,CAC5C,MAAMA,UAAyB,WAAY,CACzC,WAAW,oBAAqB,CAC9B,MAAO,CAAC,gBAAgB,CAC9B,CAEI,aAAc,CACZ,MAAO,CACb,CAEI,mBAAoB,CAoBlB,GAnBA,KAAK,iBAAmB,MAAM,KAAK,KAAK,iBAAiB,2BAA2B,CAAC,EACrF,KAAK,YAAc,KAAK,cAAc,kCAAkC,EACxE,KAAK,SAAW,MAAM,KAAK,KAAK,iBAAiB,6BAA6B,CAAC,EAC/E,KAAK,KAAO,KAAK,YAAY,iBAAiB,MAAM,EACpD,KAAK,OAAS,kBACd,KAAK,cAAgB,KAAK,cAC1B,KAAK,oBAAsB,CACzB,WAAY,KAAK,OACjB,UAAW,CACZ,EAED,KAAK,SAAS,QAAQ,CAACC,EAASC,IAAM,CACrB,IAAI,qBACjB,KAAK,2BAA2B,KAAK,IAAI,EACzC,KAAK,mBACN,EACQ,QAAQD,CAAO,CAChC,CAAO,EAEG,KAAK,KAAK,OAAQ,CACpB,IAAIE,EAAW,KAAK,SACpB,KAAK,KAAK,QAAQ,CAACC,EAAKF,IAAM,CAC5BE,EAAI,iBAAiB,QAAS,SAAUC,EAAG,CACzC,IAAIC,EAAW,SAAS,iBAAiB,SAAS,eAAe,EAAE,iBAAiB,iBAAiB,EAAG,EAAE,EACtGC,EAAYJ,EAASD,CAAC,EAAE,sBAAqB,EAAG,IAAM,OAAO,QAAUI,EAC3E,OAAO,SAAS,CACd,IAAKC,EACL,KAAM,EACN,SAAU,QACxB,CAAa,CACb,CAAW,CACX,CAAS,CACT,CAEA,CAEI,2BAA2BC,EAAS,CAElCA,EAAQ,QAAQ,CAACC,EAAOP,IAAM,CAC5B,IAAIQ,EAAQ,KAAK,SAAS,QAAQD,EAAM,MAAM,EAC1CC,IAAU,KAAK,gBACjB,KAAK,cAAgBA,EAE/B,CAAO,CAEP,CAEI,IAAI,eAAgB,CAClB,OAAO,SAAS,KAAK,aAAa,gBAAgB,CAAC,GAAK,CAC9D,CAEI,IAAI,cAAcA,EAAO,CACvB,KAAK,aAAa,iBAAkBA,CAAK,CAC/C,CAEI,yBAAyBC,EAAMC,EAAUC,EAAU,CAC7CF,IAAS,kBAAoBC,IAAa,MAAQA,IAAaC,GAC7D,KAAK,KAAK,SACZ,CAAE,EAAC,QAAQ,KAAK,KAAK,KAAM,SAAUC,EAAI,CACvCA,EAAG,UAAU,OAAO,aAAa,CAC7C,CAAW,EACD,KAAK,KAAKD,CAAQ,EAAE,UAAU,IAAI,aAAa,EAGzD,CACA,CAEE,eAAe,OAAO,oBAAqBb,CAAgB,CAC7D"}