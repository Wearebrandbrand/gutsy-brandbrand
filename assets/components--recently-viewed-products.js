if(!customElements.get("recently-viewed-products")){class n extends HTMLElement{constructor(){if(super(),this.url=theme.routes.search_url+"?view=recently-viewed&type=product&q=",this.container=this.querySelector(".products"),this.currentId=this.dataset.productHandle,this.max=4,this.products="",window.localStorage){let e=window.localStorage.getItem("recently-viewed");e&&typeof e!==void 0&&(window.recentlyViewedIds=JSON.parse(e))}}connectedCallback(){this.buildUrl()}buildUrl(){let e=0;window.recentlyViewedIds.forEach(t=>{t!==this.currentId&&(e>=this.max||(this.products+="handle:"+t+" OR ",e++))}),this.url=this.url+encodeURIComponent(this.products),this.fetchProducts()}fetchProducts(){fetch(this.url).then(e=>e.text()).then(e=>{const t=document.createElement("div");t.innerHTML=e;const r=t.querySelector(".products");r&&r.innerHTML.trim().length&&(this.container.innerHTML=r.innerHTML,this.classList.add("product-recommendations--loaded"))}).catch(e=>{console.error(e)})}}customElements.define("recently-viewed-products",n)}
//# sourceMappingURL=components--recently-viewed-products.js.map
