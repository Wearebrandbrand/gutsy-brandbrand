if(!customElements.get("product-compare-table")){class n extends HTMLElement{constructor(){super()}connectedCallback(){this.container=this.querySelector(".compare-lightbox--data"),this.addEventListeners()}addEventListeners(){this.addEventListener("render-product-compare-modal",this.renderTable.bind(this))}renderTable(){this.classList.add("loading"),this.handles=this.getCompareHandles(),this.fetchProducts()}getSelectedProducts(){return JSON.parse(window.localStorage.getItem("compare-products-brandbrand"))||[]}getCompareHandles(){const{searchParams:e}=new URL(window.location),t=e.get("compare");return typeof t=="string"&&t!==""?t.split(","):[]}async fetchProducts(){let e=this.getSelectedProducts(),t="",a=[];await Promise.all(e.map(async s=>{await fetch(`${s.url}?view=compare`,{method:"GET"}).then(r=>r.text()).then(r=>{a[s.id]=this.getSectionInnerHTML(r,".compare-lightbox--data")})})).finally(()=>{this.classList.remove("loading")}),e.forEach((s,r)=>{t+=a[s.id]}),this.container.style.setProperty("--columns",e.length),this.container.innerHTML=t,this.equalHeights()}getSectionInnerHTML(e,t){return new DOMParser().parseFromString(e,"text/html").querySelector(t).innerHTML}equalHeights(){for(let e=0;e<10;e++)this.equalizeTableRowHeightAcrossTables(e)}equalizeTableRowHeightAcrossTables(e){const t=this.container.querySelectorAll(".compare-lightbox--table"),a=[];t.forEach(s=>{const r=s.querySelectorAll(".compare-lightbox--row");if(r.length>e){const l=r[e].clientHeight;(a.length===0||l>a[e])&&(a[e]=l)}}),t.forEach(s=>{const r=s.querySelectorAll(".compare-lightbox--row");r.length>e&&(r[e].style.height=a[e]+"px")})}}customElements.define("product-compare-table",n)}
//# sourceMappingURL=components--product-compare-table.js.map
