{"version":3,"file":"components--sticky-scroller.js","sources":["../theming/js/components/sticky-scroller.js"],"sourcesContent":["/**\n *  @class\n *  @function StickyScroller\n */\nif (!customElements.get('sticky-scroller')) {\n  class StickyScroller extends HTMLElement {\n\n    constructor() {\n      super();\n      this.headerHeight = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--header-height'), 10);\n      this.parent = this.parentElement;\n\n    }\n\n    connectedCallback() {\n      this.newScrollPosition = 0;\n      this.oldScrollPositon = 0;\n      this.ticking = false;\n      this.element = this.querySelector('.sticky-scroller--element');\n      this.element.style.overflowY = 'hidden';\n      this.observer = new ResizeObserver(this.onWindowScroll.bind(this));\n\n      this.observer.observe(this.parent);\n      window.addEventListener('scroll', this.onWindowScroll.bind(this), {\n        passive: true\n      });\n    }\n\n    onWindowScroll() {\n      this.newScrollPosition = window.scrollY;\n\n      if (!this.ticking) {\n        window.requestAnimationFrame(() => {\n          this.translate();\n          this.ticking = false;\n          this.oldScrollPositon = this.newScrollPosition;\n        });\n\n        this.ticking = true;\n      }\n    }\n\n    translate() {\n      const parentRect = this.parentElement.getBoundingClientRect();\n      const distance = this.newScrollPosition - this.oldScrollPositon;\n      // Do not scroll up before sticky period\n      if (parentRect.top > this.headerHeight && distance > 0) {\n        return;\n      }\n      // Do not scroll down after sticky period\n      if (parentRect.bottom < window.innerHeight && distance < 0) {\n        return;\n      }\n      this.element.scrollTop += distance;\n    }\n  }\n\n  customElements.define('sticky-scroller', StickyScroller);\n}"],"names":["StickyScroller","parentRect","distance"],"mappings":"AAIA,GAAI,CAAC,eAAe,IAAI,iBAAiB,EAAG,CAC1C,MAAMA,UAAuB,WAAY,CAEvC,aAAc,CACZ,MAAO,EACP,KAAK,aAAe,SAAS,iBAAiB,SAAS,eAAe,EAAE,iBAAiB,iBAAiB,EAAG,EAAE,EAC/G,KAAK,OAAS,KAAK,aAEzB,CAEI,mBAAoB,CAClB,KAAK,kBAAoB,EACzB,KAAK,iBAAmB,EACxB,KAAK,QAAU,GACf,KAAK,QAAU,KAAK,cAAc,2BAA2B,EAC7D,KAAK,QAAQ,MAAM,UAAY,SAC/B,KAAK,SAAW,IAAI,eAAe,KAAK,eAAe,KAAK,IAAI,CAAC,EAEjE,KAAK,SAAS,QAAQ,KAAK,MAAM,EACjC,OAAO,iBAAiB,SAAU,KAAK,eAAe,KAAK,IAAI,EAAG,CAChE,QAAS,EACjB,CAAO,CACP,CAEI,gBAAiB,CACf,KAAK,kBAAoB,OAAO,QAE3B,KAAK,UACR,OAAO,sBAAsB,IAAM,CACjC,KAAK,UAAW,EAChB,KAAK,QAAU,GACf,KAAK,iBAAmB,KAAK,iBACvC,CAAS,EAED,KAAK,QAAU,GAEvB,CAEI,WAAY,CACV,MAAMC,EAAa,KAAK,cAAc,sBAAuB,EACvDC,EAAW,KAAK,kBAAoB,KAAK,iBAE3CD,EAAW,IAAM,KAAK,cAAgBC,EAAW,GAIjDD,EAAW,OAAS,OAAO,aAAeC,EAAW,IAGzD,KAAK,QAAQ,WAAaA,EAChC,CACA,CAEE,eAAe,OAAO,kBAAmBF,CAAc,CACzD"}