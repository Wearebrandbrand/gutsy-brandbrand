{"version":3,"file":"sections--image-with-text-overlay.js","sources":["../theming/js/sections/image-with-text-overlay.js"],"sourcesContent":["/**\n *  @class\n *  @function ImageTextOverlay\n */\n\nif (!customElements.get('image-with-text-overlay')) {\n  class ImageTextOverlay extends HTMLElement {\n    constructor() {\n      super();\n\n      this.tl = false;\n      this.splittext = false;\n    }\n\n    connectedCallback() {\n      if (document.body.classList.contains('animations-true') && typeof gsap !== 'undefined') {\n        this.prepareAnimations();\n      }\n    }\n\n    disconnectedCallback() {\n      if (document.body.classList.contains('animations-true') && typeof gsap !== 'undefined') {\n        this.tl.kill();\n        this.splittext.revert();\n      }\n    }\n\n    prepareAnimations() {\n      let section = this,\n        button_offset = 0,\n        property = (gsap.getProperty(\"html\", \"--header-height\") + gsap.getProperty(\"html\", \"--header-offset\")) + 'px';\n\n      section.tl = gsap.timeline({\n        scrollTrigger: {\n          trigger: section,\n          start: \"top center\"\n        }\n      });\n\n      document.fonts.ready.then(function () {\n        section.splittext = new SplitText(section.querySelectorAll('.image-with-text-overlay--heading, p:not(.subheading)'), {\n          type: 'lines, words',\n          linesClass: 'line-child'\n        });\n\n        if (section.querySelector('.inline-badge')) {\n          section.tl\n          .fromTo(section.querySelector('.inline-badge'), {\n            opacity: 0\n          }, {\n            duration: 0.75,\n            opacity: 1\n          }, 0);\n\n          button_offset += 0.5;\n        }\n        if (section.querySelector('.subheading')) {\n          section.tl\n          .fromTo(section.querySelector('.subheading'), {\n            opacity: 0\n          }, {\n            duration: 0.75,\n            opacity: 0.6\n          }, 0);\n\n          button_offset += 0.5;\n        }\n        if (section.querySelector('.image-with-text-overlay--heading')) {\n          let h3_duration = 0.8 + ((section.querySelectorAll('.image-with-text-overlay--heading .line-child div').length - 1) * 0.08);\n          section.tl\n          .set(section.querySelector('.image-with-text-overlay--heading'), {\n            visibility: 'visible'\n          }, 0)\n          .from(section.querySelectorAll('.image-with-text-overlay--heading .line-child div'), {\n            duration: h3_duration,\n            yPercent: '100',\n            stagger: 0.08\n          }, 0);\n          button_offset += h3_duration;\n        }\n        if (section.querySelector('.rte p')) {\n          let p_duration = 0.8 + ((section.querySelectorAll('.rte p .line-child div').length - 1) * 0.02);\n          section.tl\n          .set(section.querySelectorAll('.rte p'), {\n            visibility: 'visible'\n          }, 0)\n          .from(section.querySelectorAll('.rte p .line-child div'), {\n            duration: p_duration,\n            yPercent: '100',\n            stagger: 0.02\n          }, 0);\n          button_offset += p_duration;\n        }\n        if (section.querySelectorAll('.button')) {\n          let i = 1;\n          section.querySelectorAll('.button').forEach((item) => {\n            section.tl.fromTo(item, {\n              autoAlpha: 0\n            }, {\n              duration: 0.5,\n              autoAlpha: 1\n            }, ((button_offset * 0.4) + (i - 1) * 0.1));\n            i++;\n          });\n        }\n\n      });\n\n      if (section.querySelector('.thb-parallax-image')) {\n        gsap.fromTo(section.querySelectorAll('.thb-parallax-image'), {\n          y: '-8%'\n        }, {\n          y: '8%',\n          ease: 'none',\n          scrollTrigger: {\n            trigger: section,\n            scrub: 1,\n            start: () => `top bottom`,\n            end: () => `bottom top+=${property}`,\n            onUpdate: () => {\n              property = (gsap.getProperty(\"html\", \"--header-height\") + gsap.getProperty(\"html\", \"--header-offset\")) + 'px';\n            }\n          }\n        });\n      }\n    }\n  }\n\n  customElements.define('image-with-text-overlay', ImageTextOverlay);\n}"],"names":["ImageTextOverlay","section","button_offset","property","h3_duration","p_duration","i","item"],"mappings":"AAKA,GAAI,CAAC,eAAe,IAAI,yBAAyB,EAAG,CAClD,MAAMA,UAAyB,WAAY,CACzC,aAAc,CACZ,MAAO,EAEP,KAAK,GAAK,GACV,KAAK,UAAY,EACvB,CAEI,mBAAoB,CACd,SAAS,KAAK,UAAU,SAAS,iBAAiB,GAAK,OAAO,KAAS,KACzE,KAAK,kBAAmB,CAEhC,CAEI,sBAAuB,CACjB,SAAS,KAAK,UAAU,SAAS,iBAAiB,GAAK,OAAO,KAAS,MACzE,KAAK,GAAG,KAAM,EACd,KAAK,UAAU,OAAQ,EAE/B,CAEI,mBAAoB,CAClB,IAAIC,EAAU,KACZC,EAAgB,EAChBC,EAAY,KAAK,YAAY,OAAQ,iBAAiB,EAAI,KAAK,YAAY,OAAQ,iBAAiB,EAAK,KAE3GF,EAAQ,GAAK,KAAK,SAAS,CACzB,cAAe,CACb,QAASA,EACT,MAAO,YACjB,CACA,CAAO,EAED,SAAS,MAAM,MAAM,KAAK,UAAY,CA4BpC,GA3BAA,EAAQ,UAAY,IAAI,UAAUA,EAAQ,iBAAiB,uDAAuD,EAAG,CACnH,KAAM,eACN,WAAY,YACtB,CAAS,EAEGA,EAAQ,cAAc,eAAe,IACvCA,EAAQ,GACP,OAAOA,EAAQ,cAAc,eAAe,EAAG,CAC9C,QAAS,CACrB,EAAa,CACD,SAAU,IACV,QAAS,CACV,EAAE,CAAC,EAEJC,GAAiB,IAEfD,EAAQ,cAAc,aAAa,IACrCA,EAAQ,GACP,OAAOA,EAAQ,cAAc,aAAa,EAAG,CAC5C,QAAS,CACrB,EAAa,CACD,SAAU,IACV,QAAS,EACV,EAAE,CAAC,EAEJC,GAAiB,IAEfD,EAAQ,cAAc,mCAAmC,EAAG,CAC9D,IAAIG,EAAc,IAAQH,EAAQ,iBAAiB,mDAAmD,EAAE,OAAS,GAAK,IACtHA,EAAQ,GACP,IAAIA,EAAQ,cAAc,mCAAmC,EAAG,CAC/D,WAAY,SACxB,EAAa,CAAC,EACH,KAAKA,EAAQ,iBAAiB,mDAAmD,EAAG,CACnF,SAAUG,EACV,SAAU,MACV,QAAS,GACV,EAAE,CAAC,EACJF,GAAiBE,CAC3B,CACQ,GAAIH,EAAQ,cAAc,QAAQ,EAAG,CACnC,IAAII,EAAa,IAAQJ,EAAQ,iBAAiB,wBAAwB,EAAE,OAAS,GAAK,IAC1FA,EAAQ,GACP,IAAIA,EAAQ,iBAAiB,QAAQ,EAAG,CACvC,WAAY,SACxB,EAAa,CAAC,EACH,KAAKA,EAAQ,iBAAiB,wBAAwB,EAAG,CACxD,SAAUI,EACV,SAAU,MACV,QAAS,GACV,EAAE,CAAC,EACJH,GAAiBG,CAC3B,CACQ,GAAIJ,EAAQ,iBAAiB,SAAS,EAAG,CACvC,IAAIK,EAAI,EACRL,EAAQ,iBAAiB,SAAS,EAAE,QAASM,GAAS,CACpDN,EAAQ,GAAG,OAAOM,EAAM,CACtB,UAAW,CACzB,EAAe,CACD,SAAU,GACV,UAAW,CACzB,EAAiBL,EAAgB,IAAQI,EAAI,GAAK,EAAK,EAC3CA,GACZ,CAAW,CACX,CAEA,CAAO,EAEGL,EAAQ,cAAc,qBAAqB,GAC7C,KAAK,OAAOA,EAAQ,iBAAiB,qBAAqB,EAAG,CAC3D,EAAG,KACb,EAAW,CACD,EAAG,KACH,KAAM,OACN,cAAe,CACb,QAASA,EACT,MAAO,EACP,MAAO,IAAM,aACb,IAAK,IAAM,eAAeE,CAAQ,GAClC,SAAU,IAAM,CACdA,EAAY,KAAK,YAAY,OAAQ,iBAAiB,EAAI,KAAK,YAAY,OAAQ,iBAAiB,EAAK,IACvH,CACA,CACA,CAAS,CAET,CACA,CAEE,eAAe,OAAO,0BAA2BH,CAAgB,CACnE"}