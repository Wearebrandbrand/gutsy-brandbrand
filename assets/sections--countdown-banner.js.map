{"version":3,"file":"sections--countdown-banner.js","sources":["../theming/js/sections/countdown-banner.js"],"sourcesContent":["/**\n *  @class\n *  @function CountdownTimer\n */\nif (!customElements.get('countdown-timer')) {\n  class CountdownTimer extends HTMLElement {\n    constructor() {\n      super();\n\n      const timezone = this.dataset.timezone,\n        date = this.dataset.date.split('-'),\n        day = parseInt(date[0]),\n        month = parseInt(date[1]),\n        year = parseInt(date[2]);\n\n      let time = this.dataset.time,\n        tarhour = 0,\n        tarmin = 0;\n\n      if (time) {\n        [tarhour, tarmin] = time.split(':').map(Number);\n      }\n\n      // Set the date we're counting down to\n      let date_string = month + '/' + day + '/' + year + ' ' + tarhour + ':' + tarmin + ' GMT' + timezone;\n      // Time without timezone\n      this.countDownDate = new Date(year, month - 1, day, tarhour, tarmin, 0, 0).getTime();\n\n      // Time with timezone\n      this.countDownDate = new Date(date_string).getTime();\n\n    }\n\n    convertDateForIos(date) {\n      var arr = date.split(/[- :]/);\n      date = new Date(arr[0], arr[1] - 1, arr[2], arr[3], arr[4], arr[5]);\n      return date;\n    }\n\n    connectedCallback() {\n\n      const daysEl = this.querySelector('.days .countdown-timer--column--number'),\n        hoursEl = this.querySelector('.hours .countdown-timer--column--number'),\n        minutesEl = this.querySelector('.minutes .countdown-timer--column--number'),\n        secondsEl = this.querySelector('.seconds .countdown-timer--column--number');\n      const updateTime = () => {\n        // Get todays date and time\n        const now = Date.now();\n\n        // Find the distance between now an the count down date\n        const distance = this.countDownDate - now;\n\n        if (distance < 0) {\n          daysEl.textContent = hoursEl.textContent = minutesEl.textContent = secondsEl.textContent = '00';\n          return;\n        }\n\n        // Time calculations for days, hours, minutes and seconds\n        const days = Math.floor(distance / (1000 * 60 * 60 * 24)),\n          hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),\n          minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)),\n          seconds = Math.floor((distance % (1000 * 60)) / 1000);\n\n        requestAnimationFrame(updateTime);\n\n        daysEl.textContent = CountdownTimer.addZero(days);\n        hoursEl.textContent = CountdownTimer.addZero(hours);\n        minutesEl.textContent = CountdownTimer.addZero(minutes);\n        secondsEl.textContent = CountdownTimer.addZero(seconds);\n\n      };\n      requestAnimationFrame(updateTime);\n    }\n\n    static addZero(x) {\n      return (x < 10 && x >= 0) ? \"0\" + x : x;\n    }\n  }\n\n  customElements.define('countdown-timer', CountdownTimer);\n}"],"names":["CountdownTimer","timezone","date","day","month","year","time","tarhour","tarmin","date_string","arr","daysEl","hoursEl","minutesEl","secondsEl","updateTime","now","distance","days","hours","minutes","seconds","x"],"mappings":"AAIA,GAAI,CAAC,eAAe,IAAI,iBAAiB,EAAG,CAC1C,MAAMA,UAAuB,WAAY,CACvC,aAAc,CACZ,MAAO,EAEP,MAAMC,EAAW,KAAK,QAAQ,SAC5BC,EAAO,KAAK,QAAQ,KAAK,MAAM,GAAG,EAClCC,EAAM,SAASD,EAAK,CAAC,CAAC,EACtBE,EAAQ,SAASF,EAAK,CAAC,CAAC,EACxBG,EAAO,SAASH,EAAK,CAAC,CAAC,EAEzB,IAAII,EAAO,KAAK,QAAQ,KACtBC,EAAU,EACVC,EAAS,EAEPF,IACF,CAACC,EAASC,CAAM,EAAIF,EAAK,MAAM,GAAG,EAAE,IAAI,MAAM,GAIhD,IAAIG,EAAcL,EAAQ,IAAMD,EAAM,IAAME,EAAO,IAAME,EAAU,IAAMC,EAAS,OAASP,EAE3F,KAAK,cAAgB,IAAI,KAAKI,EAAMD,EAAQ,EAAGD,EAAKI,EAASC,EAAQ,EAAG,CAAC,EAAE,QAAS,EAGpF,KAAK,cAAgB,IAAI,KAAKC,CAAW,EAAE,QAAS,CAE1D,CAEI,kBAAkBP,EAAM,CACtB,IAAIQ,EAAMR,EAAK,MAAM,OAAO,EAC5B,OAAAA,EAAO,IAAI,KAAKQ,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAI,EAAGA,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAGA,EAAI,CAAC,CAAC,EAC3DR,CACb,CAEI,mBAAoB,CAElB,MAAMS,EAAS,KAAK,cAAc,wCAAwC,EACxEC,EAAU,KAAK,cAAc,yCAAyC,EACtEC,EAAY,KAAK,cAAc,2CAA2C,EAC1EC,EAAY,KAAK,cAAc,2CAA2C,EACtEC,EAAa,IAAM,CAEvB,MAAMC,EAAM,KAAK,IAAK,EAGhBC,EAAW,KAAK,cAAgBD,EAEtC,GAAIC,EAAW,EAAG,CAChBN,EAAO,YAAcC,EAAQ,YAAcC,EAAU,YAAcC,EAAU,YAAc,KAC3F,MACV,CAGQ,MAAMI,EAAO,KAAK,MAAMD,GAAY,IAAO,GAAK,GAAK,GAAG,EACtDE,EAAQ,KAAK,MAAOF,GAAY,IAAO,GAAK,GAAK,KAAQ,IAAO,GAAK,GAAG,EACxEG,EAAU,KAAK,MAAOH,GAAY,IAAO,GAAK,KAAQ,IAAO,GAAG,EAChEI,EAAU,KAAK,MAAOJ,GAAY,IAAO,IAAO,GAAI,EAEtD,sBAAsBF,CAAU,EAEhCJ,EAAO,YAAcX,EAAe,QAAQkB,CAAI,EAChDN,EAAQ,YAAcZ,EAAe,QAAQmB,CAAK,EAClDN,EAAU,YAAcb,EAAe,QAAQoB,CAAO,EACtDN,EAAU,YAAcd,EAAe,QAAQqB,CAAO,CAEvD,EACD,sBAAsBN,CAAU,CACtC,CAEI,OAAO,QAAQO,EAAG,CAChB,OAAQA,EAAI,IAAMA,GAAK,EAAK,IAAMA,EAAIA,CAC5C,CACA,CAEE,eAAe,OAAO,kBAAmBtB,CAAc,CACzD"}