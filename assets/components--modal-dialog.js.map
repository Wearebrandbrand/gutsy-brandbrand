{"version":3,"file":"components--modal-dialog.js","sources":["../theming/js/components/modal-dialog.js"],"sourcesContent":["/**\n *  @class\n *  @function ModalDialog\n */\nif (!customElements.get('modal-dialog')) {\n  class ModalDialog extends HTMLElement {\n    constructor() {\n      super();\n\n      this.age_verification = this.classList.contains('age-verification-modal');\n      this.id = this.getAttribute('id');\n      this.delay = parseInt(this.dataset.delay, 10) * 1000;\n      this.popup = this.dataset.popup;\n      this.section_id = this.dataset.sectionId;\n      this.disabled = this.getAttribute('disabled') != undefined;\n      this.button = this.querySelector('[id^=\"ModalClose-\"]');\n\n      this.button.addEventListener('click', this.hide.bind(this));\n\n      if (!this.disabled) {\n        this.addEventListener('keyup', (event) => {\n          if (event.code.toUpperCase() === 'ESCAPE') {\n            this.hide();\n          }\n        });\n        this.addEventListener('click', (event) => {\n          if (event.target.nodeName === 'MODAL-DIALOG') this.hide();\n        });\n      }\n      if (this.delay && this.delay > 0) {\n        if (!this.getCookie()) {\n          setTimeout(() => {\n            this.show();\n            this.button.addEventListener('click', this.setCookie.bind(this));\n          }, this.delay);\n        }\n      }\n      if (this.age_verification) {\n        if (!this.getCookie()) {\n          this.show();\n        }\n        this.button.addEventListener('click', this.setCookie.bind(this));\n      }\n      if (Shopify.designMode) {\n        this.moved = true;\n        document.addEventListener('shopify:section:select', (event) => {\n          if (event.detail.sectionId === this.section_id) {\n            this.show();\n          }\n        });\n        document.addEventListener('shopify:section:deselect', (event) => {\n          if (event.detail.sectionId === this.section_id) {\n            this.hide();\n          }\n        });\n      }\n    }\n\n    connectedCallback() {\n      if (this.moved) return;\n      this.moved = true;\n      document.body.appendChild(this);\n    }\n\n    show(opener) {\n      this.openedBy = opener;\n      document.body.classList.add('overflow-hidden');\n      this.setAttribute('open', '');\n\n      setTimeout(() => {\n        this.querySelector('[role=\"dialog\"]').focus();\n      }, 100);\n    }\n\n    hide() {\n      document.body.classList.remove('overflow-hidden');\n      this.removeAttribute('open');\n      this.querySelectorAll('.js-youtube').forEach((video) => {\n        video.contentWindow.postMessage('{\"event\":\"command\",\"func\":\"' + 'pauseVideo' + '\",\"args\":\"\"}', '*');\n      });\n      this.querySelectorAll('.js-vimeo').forEach((video) => {\n        video.contentWindow.postMessage('{\"method\":\"pause\"}', '*');\n      });\n      this.querySelectorAll('video').forEach((video) => video.pause());\n\n      if (this.popup) {\n\n      }\n    }\n\n    getCookie() {\n      return window.localStorage.getItem(this.id);\n    }\n\n    setCookie() {\n      window.localStorage.setItem(this.id, JSON.stringify(new Date()));\n    }\n  }\n\n  customElements.define('modal-dialog', ModalDialog);\n}\nif (!customElements.get('modal-opener')) {\n  class ModalOpener extends HTMLElement {\n    constructor() {\n      super();\n\n      const button = this.querySelector('button');\n\n      if (!button) return;\n      button.addEventListener('click', () => {\n        const modal = document.querySelector(this.getAttribute('data-modal'));\n        if (modal) modal.show(button);\n      });\n    }\n  }\n\n  customElements.define('modal-opener', ModalOpener);\n}"],"names":["ModalDialog","event","opener","video","ModalOpener","button","modal"],"mappings":"AAIA,GAAI,CAAC,eAAe,IAAI,cAAc,EAAG,CACvC,MAAMA,UAAoB,WAAY,CACpC,aAAc,CACZ,MAAO,EAEP,KAAK,iBAAmB,KAAK,UAAU,SAAS,wBAAwB,EACxE,KAAK,GAAK,KAAK,aAAa,IAAI,EAChC,KAAK,MAAQ,SAAS,KAAK,QAAQ,MAAO,EAAE,EAAI,IAChD,KAAK,MAAQ,KAAK,QAAQ,MAC1B,KAAK,WAAa,KAAK,QAAQ,UAC/B,KAAK,SAAW,KAAK,aAAa,UAAU,GAAK,KACjD,KAAK,OAAS,KAAK,cAAc,qBAAqB,EAEtD,KAAK,OAAO,iBAAiB,QAAS,KAAK,KAAK,KAAK,IAAI,CAAC,EAErD,KAAK,WACR,KAAK,iBAAiB,QAAUC,GAAU,CACpCA,EAAM,KAAK,YAAW,IAAO,UAC/B,KAAK,KAAM,CAEvB,CAAS,EACD,KAAK,iBAAiB,QAAUA,GAAU,CACpCA,EAAM,OAAO,WAAa,gBAAgB,KAAK,KAAM,CACnE,CAAS,GAEC,KAAK,OAAS,KAAK,MAAQ,IACxB,KAAK,aACR,WAAW,IAAM,CACf,KAAK,KAAM,EACX,KAAK,OAAO,iBAAiB,QAAS,KAAK,UAAU,KAAK,IAAI,CAAC,CAC3E,EAAa,KAAK,KAAK,GAGb,KAAK,mBACF,KAAK,aACR,KAAK,KAAM,EAEb,KAAK,OAAO,iBAAiB,QAAS,KAAK,UAAU,KAAK,IAAI,CAAC,GAE7D,QAAQ,aACV,KAAK,MAAQ,GACb,SAAS,iBAAiB,yBAA2BA,GAAU,CACzDA,EAAM,OAAO,YAAc,KAAK,YAClC,KAAK,KAAM,CAEvB,CAAS,EACD,SAAS,iBAAiB,2BAA6BA,GAAU,CAC3DA,EAAM,OAAO,YAAc,KAAK,YAClC,KAAK,KAAM,CAEvB,CAAS,EAET,CAEI,mBAAoB,CACd,KAAK,QACT,KAAK,MAAQ,GACb,SAAS,KAAK,YAAY,IAAI,EACpC,CAEI,KAAKC,EAAQ,CACX,KAAK,SAAWA,EAChB,SAAS,KAAK,UAAU,IAAI,iBAAiB,EAC7C,KAAK,aAAa,OAAQ,EAAE,EAE5B,WAAW,IAAM,CACf,KAAK,cAAc,iBAAiB,EAAE,MAAO,CAC9C,EAAE,GAAG,CACZ,CAEI,MAAO,CACL,SAAS,KAAK,UAAU,OAAO,iBAAiB,EAChD,KAAK,gBAAgB,MAAM,EAC3B,KAAK,iBAAiB,aAAa,EAAE,QAASC,GAAU,CACtDA,EAAM,cAAc,YAAY,oDAA+D,GAAG,CAC1G,CAAO,EACD,KAAK,iBAAiB,WAAW,EAAE,QAASA,GAAU,CACpDA,EAAM,cAAc,YAAY,qBAAsB,GAAG,CACjE,CAAO,EACD,KAAK,iBAAiB,OAAO,EAAE,QAASA,GAAUA,EAAM,OAAO,EAE3D,KAAK,KAGf,CAEI,WAAY,CACV,OAAO,OAAO,aAAa,QAAQ,KAAK,EAAE,CAChD,CAEI,WAAY,CACV,OAAO,aAAa,QAAQ,KAAK,GAAI,KAAK,UAAU,IAAI,IAAM,CAAC,CACrE,CACA,CAEE,eAAe,OAAO,eAAgBH,CAAW,CACnD,CACA,GAAI,CAAC,eAAe,IAAI,cAAc,EAAG,CACvC,MAAMI,UAAoB,WAAY,CACpC,aAAc,CACZ,MAAO,EAEP,MAAMC,EAAS,KAAK,cAAc,QAAQ,EAErCA,GACLA,EAAO,iBAAiB,QAAS,IAAM,CACrC,MAAMC,EAAQ,SAAS,cAAc,KAAK,aAAa,YAAY,CAAC,EAChEA,GAAOA,EAAM,KAAKD,CAAM,CACpC,CAAO,CACP,CACA,CAEE,eAAe,OAAO,eAAgBD,CAAW,CACnD"}