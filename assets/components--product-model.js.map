{"version":3,"file":"components--product-model.js","sources":["../theming/js/components/product-model.js"],"sourcesContent":["if (!customElements.get('product-model')) {\n  customElements.define('product-model', class ProductModel extends HTMLElement {\n    constructor() {\n      super();\n      const button = this.querySelector('.product-single__media-model-button');\n      const remove = this.parentNode.querySelector('.product-single__media-xr-close');\n\n      this.slider = document.querySelector('#Product-Slider');\n      button.addEventListener('click', this.loadContent.bind(this));\n      remove.addEventListener('click', this.unloadContent.bind(this));\n    }\n\n    loadContent() {\n      if (!this.getAttribute('loaded')) {\n        const content = document.createElement('div');\n        content.appendChild(this.querySelector('template').content.firstElementChild.cloneNode(true));\n        this.setAttribute('loaded', true);\n        const deferredElement = this.appendChild(content.querySelector('video, model-viewer, iframe'));\n\n        deferredElement.focus();\n      }\n      Shopify.loadFeatures([\n        {\n          name: 'model-viewer-ui',\n          version: '1.0',\n          onLoad: this.setupModelViewerUI.bind(this),\n        },]);\n      this.slider.setDraggable(false);\n    }\n\n    unloadContent() {\n      this.querySelector('video, model-viewer, iframe').remove();\n      this.removeAttribute('loaded');\n      this.slider.setDraggable(true);\n    }\n\n    setupModelViewerUI(errors) {\n      if (errors) return;\n\n      this.modelViewerUI = new Shopify.ModelViewerUI(this.querySelector('model-viewer'));\n    }\n  });\n}\n\nwindow.ProductModel = {\n  loadShopifyXR() {\n    Shopify.loadFeatures([\n      {\n        name: 'shopify-xr',\n        version: '1.0',\n        onLoad: this.setupShopifyXR.bind(this),\n      },]);\n  },\n  setupShopifyXR(errors) {\n    if (errors) return;\n\n    if (!window.ShopifyXR) {\n      document.addEventListener('shopify_xr_initialized', () =>\n        this.setupShopifyXR()\n      );\n      return;\n    }\n\n    document.querySelectorAll('[id^=\"ProductJSON-\"]').forEach((modelJSON) => {\n      window.ShopifyXR.addModels(JSON.parse(modelJSON.textContent));\n      modelJSON.remove();\n    });\n    window.ShopifyXR.setupXRElements();\n  },\n};\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  if (window.ProductModel) {\n    window.ProductModel.loadShopifyXR();\n  }\n});"],"names":["button","remove","content","errors","modelJSON"],"mappings":"AAAK,eAAe,IAAI,eAAe,GACrC,eAAe,OAAO,gBAAiB,cAA2B,WAAY,CAC5E,aAAc,CACZ,MAAO,EACP,MAAMA,EAAS,KAAK,cAAc,qCAAqC,EACjEC,EAAS,KAAK,WAAW,cAAc,iCAAiC,EAE9E,KAAK,OAAS,SAAS,cAAc,iBAAiB,EACtDD,EAAO,iBAAiB,QAAS,KAAK,YAAY,KAAK,IAAI,CAAC,EAC5DC,EAAO,iBAAiB,QAAS,KAAK,cAAc,KAAK,IAAI,CAAC,CACpE,CAEI,aAAc,CACZ,GAAI,CAAC,KAAK,aAAa,QAAQ,EAAG,CAChC,MAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,YAAY,KAAK,cAAc,UAAU,EAAE,QAAQ,kBAAkB,UAAU,EAAI,CAAC,EAC5F,KAAK,aAAa,SAAU,EAAI,EACR,KAAK,YAAYA,EAAQ,cAAc,6BAA6B,CAAC,EAE7E,MAAO,CAC/B,CACM,QAAQ,aAAa,CACnB,CACE,KAAM,kBACN,QAAS,MACT,OAAQ,KAAK,mBAAmB,KAAK,IAAI,CACnD,EAAW,EACL,KAAK,OAAO,aAAa,EAAK,CACpC,CAEI,eAAgB,CACd,KAAK,cAAc,6BAA6B,EAAE,OAAQ,EAC1D,KAAK,gBAAgB,QAAQ,EAC7B,KAAK,OAAO,aAAa,EAAI,CACnC,CAEI,mBAAmBC,EAAQ,CACrBA,IAEJ,KAAK,cAAgB,IAAI,QAAQ,cAAc,KAAK,cAAc,cAAc,CAAC,EACvF,CACA,CAAG,EAGH,OAAO,aAAe,CACpB,eAAgB,CACd,QAAQ,aAAa,CACnB,CACE,KAAM,aACN,QAAS,MACT,OAAQ,KAAK,eAAe,KAAK,IAAI,CAC7C,EAAS,CACN,EACD,eAAeA,EAAQ,CACrB,GAAI,CAAAA,EAEJ,IAAI,CAAC,OAAO,UAAW,CACrB,SAAS,iBAAiB,yBAA0B,IAClD,KAAK,eAAc,CACpB,EACD,MACN,CAEI,SAAS,iBAAiB,sBAAsB,EAAE,QAASC,GAAc,CACvE,OAAO,UAAU,UAAU,KAAK,MAAMA,EAAU,WAAW,CAAC,EAC5DA,EAAU,OAAQ,CACxB,CAAK,EACD,OAAO,UAAU,gBAAiB,EACnC,CACH,EAEA,OAAO,iBAAiB,mBAAoB,IAAM,CAC5C,OAAO,cACT,OAAO,aAAa,cAAe,CAEvC,CAAC"}